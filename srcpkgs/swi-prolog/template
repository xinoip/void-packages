# Template file for 'swi-prolog'
pkgname=swi-prolog
version=10.0.1
revision=1
build_style=cmake
build_helper="qemu"
configure_args="-DBUILD_TESTING=OFF"
hostmakedepends="pkg-config"
makedepends="SDL3-devel SDL3_image-devel cairo-devel gmp-devel libarchive-devel
 libyaml-devel ncurses-devel openssl-devel pango-devel pcre2-devel
 unixodbc-devel zlib-devel"
short_desc="Comprehensive free Prolog environment"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="LGPL-2.1-or-later"
homepage="http://www.swi-prolog.org/"
changelog="http://www.swi-prolog.org/ChangeLog?branch=stable"
distfiles="http://www.swi-prolog.org/download/stable/src/swipl-${version}.tar.gz"
checksum=a9504745310e36195cf8cee9ad9164a7aa99e389c669ca6d279e321efc2ad9d4
CFLAGS=-D_FILE_OFFSET_BITS=64
CXXFLAGS=-D_FILE_OFFSET_BITS=64

if [ "$XBPS_TARGET_LIBC" = "glibc" ]; then
	makedepends+=" libxcrypt-devel"
fi

if [ "$XBPS_TARGET_WORDSIZE" = 32 ]; then
	broken="churning on CHR bootstrap compilation"
fi
