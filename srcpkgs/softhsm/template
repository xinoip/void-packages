# Template file for 'softhsm'
pkgname=softhsm
version=2.7.0
revision=1
build_style=gnu-configure
configure_args="
 --with-crypto-backend=openssl
 --with-objectstore-backend-db"
hostmakedepends="pkg-config automake libtool sqlite"
makedepends="openssl-devel sqlite-devel p11-kit-devel"
checkdepends="libcppunit-devel"
short_desc="Cryptographic store accessible through a PKCS #11 interface"
maintainer="Duncaen <duncaen@voidlinux.org>"
license="BSD-2-Clause"
homepage="https://www.opendnssec.org/en/latest/softhsm/"
changelog="https://raw.githubusercontent.com/softhsm/SoftHSMv2/refs/heads/main/NEWS"
distfiles="https://github.com/softhsm/SoftHSMv2/archive/refs/tags/${version}.tar.gz"
checksum=be14a5820ec457eac5154462ffae51ba5d8a643f6760514d4b4b83a77be91573

conf_files="/etc/softhsm2.conf"

pre_configure() {
	./autogen.sh
}

post_install() {
	vlicense LICENSE
	rm "${DESTDIR}/etc/softhsm2.conf.sample"
}
