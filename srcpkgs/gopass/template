# Template file for 'gopass'
pkgname=gopass
version=1.16.1
revision=1
build_style=go
go_import_path=github.com/gopasspw/gopass
go_package="${go_import_path}"
make_check_target="./tests"
depends="gnupg>=2 git"
checkdepends="gnupg git age"
short_desc="Slightly more awesome standard unix password manager for teams"
maintainer="Felipe Nogueira <contato.fnog@gmail.com>"
license="MIT"
homepage="https://www.gopass.pw/"
changelog="https://raw.githubusercontent.com/gopasspw/gopass/master/CHANGELOG.md"
distfiles="https://github.com/gopasspw/gopass/archive/refs/tags/v${version}.tar.gz"
checksum=33451a782b66266c59560a5ec7f4e34c104c501a36b445fc574fad71e3b3d884
make_check_pre="env GOPASS_BINARY=${GOPATH}/bin/gopass"

export GOFLAGS="-buildmode=pie"

post_install() {
	vlicense LICENSE
	vman gopass.1

	for shell in bash fish zsh; do
		vcompletion $shell.completion $shell
	done
}
