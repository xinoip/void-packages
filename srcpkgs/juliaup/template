# Template file for 'juliaup'
pkgname=juliaup
version=1.19.8
revision=1
archs="x86_64* i686 aarch64"
build_style=cargo
build_helper="qemu"
short_desc="Julia installer and version multiplexer"
maintainer="Orphaned <orphan@voidlinux.org>"
license="MIT"
homepage="https://github.com/JuliaLang/juliaup"
distfiles="https://github.com/JuliaLang/juliaup/archive/refs/tags/v${version}.tar.gz"
checksum=3c33179c8de15f2090e817f5a492f069dd0c5bc548d2ad31faa9717f3eefe683

if [ "$XBPS_TARGET_MACHINE" = x86_64-musl ]; then
	# command_add test fails, doesn't seem to be able to launch the downloaded julia in the test
	make_check=no
fi

post_install() {
	for sh in bash fish zsh; do
		vtargetrun ${DESTDIR}/usr/bin/${pkgname} completions $sh > completions.$sh
		vcompletion completions.$sh $sh
	done
	vlicense LICENSE
}
